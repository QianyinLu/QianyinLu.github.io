<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Presnie Lu - Dashboard</title><link href="/" rel="alternate"></link><link href="/feeds/dashboard.atom.xml" rel="self"></link><id>/</id><updated>2020-11-18T14:30:00-05:00</updated><subtitle>A Data Science Portfolio</subtitle><entry><title>Create an interactive dashboard for COVID19</title><link href="/finalproject.html" rel="alternate"></link><published>2020-11-15T11:00:00-05:00</published><updated>2020-11-18T14:30:00-05:00</updated><author><name>Presnie Lu</name></author><id>tag:None,2020-11-15:/finalproject.html</id><summary type="html">&lt;p&gt;Build machine learning models for daily total cases growth rate and create a dashboard&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;The goals of this project are mainly two:&lt;/strong&gt; &lt;br&gt;
&lt;strong&gt;1. Generate machine learning models to predict daily total cases growth rate and explore which factors influence this the most.&lt;/strong&gt; &lt;br&gt;
&lt;strong&gt;2. Create an interactive dashboard that help readers visualize the general situation of Covid19 from the entire US, state and individual level.&lt;/strong&gt; &lt;br&gt;
&lt;strong&gt;3. Analyze how policy influence the case growth rate.&lt;/strong&gt; &lt;br&gt;
&lt;strong&gt;In this article, I will mainly focus on what I did in this project and what I learned from it. In addition, I will offer a brief walkthrough for our final data product, which is the dashboard. &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;To begin with, please take a look at our &lt;a href="https://final-project-823.herokuapp.com/"&gt;dashboard&lt;/a&gt; and &lt;a href="https://github.com/YinJishen/BIOSTAT823-Final-Project"&gt;github&lt;/a&gt;. &lt;br&gt;
In summary, our dashboard is consisted of four parts. The first part provides readers real time update of COVID19 new/total and death cases for the entire United states and individual states. For the next part, we compared the effect of policies between state. The method we used is to calculate the difference of increase rate of total cases within a 7/15 day ranges. In this part, we also implement comparison of individual state's increase rate to the average of entire U.S. The third part used random forest models for predicting daily case growth rate for aggregate U.S. level and also for each individual state based on hospitalization, policy and demographic data. The last part implemented a stratified sampling methodology based on age group to get partial sampling from our huge dataset. Using such data, we analyzed what factors, such as race and sex, influence the individual level infectious and death rate. This part also helps us explore further the demographic composition effect for state level from part three.   &lt;/p&gt;
&lt;p&gt;In general, the target audience for our project is the group of people who are non-statisticians. Therefore, our dashboard uses mostly interpretable plot to show the model results. In addition, our dashboard also allows users to choose which area they are interested in with a lot of freedom by using dropdown menu or selection box. Therefore, even if the audience does not come with a goal to analyze data, the dashboard can still serve as an informative tool and search engine for people to learn any related information aboout COVID19.    &lt;/p&gt;
&lt;h1&gt;PartIII: Predict Covid19 Case Daily Growth Rate&lt;/h1&gt;
&lt;p&gt;One big focus of this project is to generate model(s) for predicting the daily growth rate of COVID19 cases. I was mainly charged for doing this part during the process. By cooperating with one other team member, we finally decided to generate models from two levels: the entire US and state level. The specific session that represents our results is &lt;strong&gt;Part III: Predict Covid19 Case Growth Rate&lt;/strong&gt; from our &lt;a href="https://final-project-823.herokuapp.com/"&gt;dashboard&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Data Source&lt;/h2&gt;
&lt;p&gt;In terms of Covid19 cases data, we mainly got the data from the &lt;a href="https://data.cdc.gov/"&gt;Centers for Disease Control and Prevention&lt;/a&gt;. We also decided to use make predictions from these three perspectives: &lt;a href="https://www.cdc.gov/nhsn/covid19/report-patient-impact.html#anchor_1594393649"&gt;Hospitalization&lt;/a&gt;, &lt;a href="https://www.census.gov/data/developers/data-sets/acs-1year.html"&gt;Demographic&lt;/a&gt; and &lt;a href="https://github.com/USCOVIDpolicy/COVID-19-US-State-Policy-Database"&gt;Policy&lt;/a&gt;. All these databases are available online and readers can easily pull the data through our code from the data folder in Github. Among these three, I was reponsible for get the statewise demographic and policy data.   &lt;/p&gt;
&lt;h2&gt;Model Building&lt;/h2&gt;
&lt;p&gt;There are two parts of models we decide to build. The first part of the model is using all three perspectives of the variables as I mentioned and predict the overall case growth rate for all states together. For this model, the input of our data is all states' related information from 2020 April to July. The second part is using only hospitalization and policy data as independent variables to predict the daily case growth rate for each state. Therefore, in this part, we actually built different models for different states. The data range is the same (2020 April to July) for all states. The reason for removing the demographic information is that we assume for individual state, the demographic information, such as age group, race and population density will not change too much within the available date range. Therefore, such information will be less useful to predict the change.   &lt;/p&gt;
&lt;h3&gt;Data Preprocessing&lt;/h3&gt;
&lt;p&gt;Apart from mapping different sources of data into consistent state and date levels, we also did some extra work before building the model. One biggest change we made was to the policy data. The raw data only records the specified date for policies to start or end. Therefore, in order to convert such information into a binary indicator (for instance, wether a state in day 10 is under the policy where it requires all businesses to close), I wrote a helper function to convert all relevant policies into dummy variables. This also explained why we did not remove this variable from the second part because for individual state, the policy variable actually varies across different days. We also realized that there are too many policies availble. To avoid overfitting problems, we decided to pre-select some features base on 1. our personal interest and 2. how did the policy variables change across state or overtime. (For instance, we did not include declaration of state of emergency because it is mostly executed for all states before April.)&lt;/p&gt;
&lt;p&gt;In addition, notice that for both parts, the data are time-relevant. Thus, in order to de-trend and make the data more stationary, we decided to add lag variables of case growth into the model. Similarly, we added some helper function to help us generate such variable more efficiently.&lt;/p&gt;
&lt;h3&gt;Model Building&lt;/h3&gt;
&lt;p&gt;For both parts, we decided to use random forest as our model. There are two reasons: 1. Random forest tends to generate more accurate prediction results. 2. Random forest is able to offer feature importances conveniently. After choosing the model, we decided to split the data into training and test set. As we realized that we have time series data, it will be more wise to split the data base on time order. Then, we chose the all data before "2020-06-01" as our training set and the rest of data as our test set. We also chose to log scale some of the discrete variables from the hospitalization perspective and scale all our data using standard scaler so that the scale of data will not influence the final outcome. Finally, we decided to use RMSE as our accuracy matrix. &lt;/p&gt;
&lt;h2&gt;Dashboard Product&lt;/h2&gt;
&lt;p&gt;The dashboard was divided into two parts base on the model. The first part is called overview and the second part is a state level view.&lt;/p&gt;
&lt;h3&gt;Overview&lt;/h3&gt;
&lt;p&gt;This part of the dashboard is used to show readers our prediction result for model1 - the entire US level. The goal of this part is to show which features are important to case daily growth rate for all US as a whole. The top level presents the total prediction error (RMSE) for training and test data. The lower level is a feature importance plot. The reader can adjust manually on the left sidebar on how many features they want to see.&lt;br&gt;
&lt;img alt="US_feature" src="\img\US_feature.png" title="US Feature Importance"&gt;&lt;br&gt;
From this plot we can see, hospitalization is the most important feature that determines the change of case increase rate. In addition, state's race composition is also relatively importance as we can see that the ratio of African American and white were the top 10 important features among all. Similarly, the age group for each state is also somewhat important.   &lt;/p&gt;
&lt;h3&gt;State Level&lt;/h3&gt;
&lt;p&gt;This part of the dashboard is used to see each state's case growth rate prediction result as well as state specific demographic information. In general ,this part is divided into three perspectives. The first part shows the prediction error for training and test set for the selected state. The second part, as the following, shows the actual value of the actual case growth and our predictions using the model. Readers can choose which period to look at by clicking on the left sidebar. In addition, if the reader wants to see the specified values of prediction and actuals, he can just move the mouse on it and a bubble contains the tooltip information will automatically appears. The following is an example of Virginia's prediction. &lt;br&gt;
&lt;img alt="State_level" src="\img\state_prediction.png" title="State Level Predictions"&gt;&lt;br&gt;
From the plot we can see that our predictions mostly align quite close to the actual line. Our predicted values showed consistent trend with the actual growth rate. The only difference is that our model's result seem to be a little more stable. Overall, we see the growth rate as a whole is getting smoother and more stable as time goes and the scale was much smaller. This means COVID19 case increase in Virginia is much slower in June compared to April and May. &lt;br&gt;
Similar to Overview, we put a feature importance plot for state level model. Readers can also choose how many features to look at using the left sidebar. Different from overview, we exclude the state demographic information in the plot due to the reason I mentioned in the modeling part. What's more, we removed some variables that have really minimal feature importance score. An example of Minnesota's feature importance plot is shown below. &lt;br&gt;
&lt;img alt="MN1" src="\img\MN.png" title="MN feature importance"&gt;&lt;br&gt;
From this importance figure, we got a similar conclusion from the US level plot. Hospitalization is the most important aspect among all. On the other hand, policy's effect is actually quite small, even minimal. This can be caused by the fact that policy tend to be in effect after a periods of time. Therefore, even at the start date our dummy variable indicates 1, the policy hasn't been in effect on the case growth rate yet. Such confusing information will make the model think such variable is not important. Therefore, to further explore the effect of policy across states, we developed our Part II, which uses data within 7 days that the policy starts.   &lt;/p&gt;
&lt;p&gt;Considering that the reader may curious about the demographic information about this specified state, I added a session called State information to show visually what is the demographic composition of the state. This allows the reader to also relate this state level information with the overview part. The following is an example of Minnesota's demographic information.
&lt;img alt="MN2" src="\img\sex.png" title="MN sex ratio"&gt; &lt;br&gt;
&lt;img alt="MN3" src="\img\race.png" title="MN race ratio"&gt;&lt;br&gt;
From the plot we can see the sex ratio of Minnesota is quite balanced. In addition, from the race ratio pie chart, white is the majority of the state. We can then relate this information and infer that the COVID19 growth rate in MN is different from other states due to the difference of white population percentage in the state.   &lt;/p&gt;
&lt;p&gt;When readers clicked the checkbox "Show me more data", a complete table of this state's demographic information will be shown as well as a bar plot showing the age groups ("Above 65" and "Under 18"), which are the two groups we believe will be affected by COVID19 the most. 
&lt;img alt="MN4" src="\img\More.png" title="More data"&gt;    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Then, I will introduce the rest parts of our dashboard. I was also engaged in a lot of data collection and plotting process, but I won't go into too many details about it. &lt;/strong&gt;&lt;/p&gt;
&lt;h1&gt;Part I: Overview&lt;/h1&gt;
&lt;p&gt;This part is intended to offer an overview of COVID19 from a state and country level. This page is also always updated to the most recent available information from the CDC because it pulls information directly using API from the CDC. Therefore, the reader can feel free to choose any date by change the data input from the left sidebar.   &lt;/p&gt;
&lt;p&gt;For the first part, readers can choose to focus on a state. The dashboard is able to provide the new cases and new death of this state. I will use North Carolina as an example here. &lt;br&gt;
&lt;img alt="NC" src="\img\NC.png" title="North Carolina COVID19"&gt;  &lt;br&gt;
From this plot we can see that the number of new cases has been increasing largely from April to July. This is showing that for North Carolina's overall COVID19 situation is getting worse. While luckily, the death case remained at a relatively stable level. This plot possibly indicates that North Carolina is doing good in medical care for COVID19 patients while the government and people did not follow strictly the policy that prevented the spread of virus.   &lt;/p&gt;
&lt;p&gt;For the second part, the dashboard offers an overview of the most updated COVID19 situation for the entire United States as a map. The map is also interactive that readers can put cursor on the map and they can see the specified number and state name on the map. The readers can choose which data type to focus on from the left sidebar. I attached the plots of new cases and death per million people map as the following: &lt;br&gt;
&lt;img alt="US_NEW_CASE" src="\img\map_new_cases.png" title="US New Cases"&gt; &lt;br&gt;
&lt;img alt="Death per_million_people" src="\img\death.png" title="Us Death per million"&gt; &lt;br&gt;
From the plot, it is easy to observe that for the last day CDC updates the information, California, Texas and Illinois are the most severe states with the most new cases increase. In addition, in terms of death rate, New Jersey and Massachusettes are the worst states with highest death per million people. This indicates that these states' hospitalization system might not be as good as others or the demographic composition of these states, such as over 65 population leads to high death rate. &lt;/p&gt;
&lt;h1&gt;Part II: State Level Comparison&lt;/h1&gt;
&lt;p&gt;As I mentioned in part III, because the policy variable in the random forest can hardly capture the real effect of policy, we instead built a separate session to evaluation the effectness of policy across states. In this session, readers can choose from the left sidebar which policy, day range, how many states and which date to look at.    &lt;/p&gt;
&lt;p&gt;The first part is using the within certain day ranges (7) to see the short term and day ranges(15) as the long term effect of certain policy. By default, readers should see the top 5 and last 5 states evaluated by policy's performance. To be more specific, the performance is calculated by difference of case increase rate. (e.g. Average of the case growth rate 7 days after the policy started - Average of the case growth rate 7 days before the policy started) An example of stay at home order range by 7 days is shown below:&lt;br&gt;
&lt;img alt="Stay" src="\img\stay.png" title="Stay at home order"&gt; &lt;br&gt;
According to the chart, the higher decrease of the growth rate, the better the policy is. On the other hand, the worst state actually has still increasing growth rate. This means that such policy in certain state has a negative effect. This can happen for two reasons: firstly, the government does not implement the policy with certain punishment for violation, thus, most people chose to ignore it; secondly, the policy took place too late: there are too many cases exists and the policy itself can no longer handle such scenario, therefore, the effect of policy is unable to offset the rapid increase of the new cases.   &lt;/p&gt;
&lt;p&gt;The second part is actually less relevant to the policy itself. This map gave people an overview of how each state's case increase rate compared to the entire United States. The reader can choose any available data and the map will reflect the specified number of increase rate of each state (by moving the cursor) and that day's overall US increase rate. Because the color of the map is determined by the State's increase rate - US's average increase rate, the darker the state's color, the worse the COVID19 in that state. I will show an example of the increase rate in 2020-05-28:&lt;br&gt;
&lt;img alt="Inc_rate" src="\img\relative_inc.png" title="Relative Increase Rate"&gt;  &lt;br&gt;
From this map, Minnesota was doing the worst among the entire US in 2020-05-28 because it's case increase rate is much higher than the average of the US. Actually, we can then easily relate this information with our Part III, which I gave an example of Minnesota as well for their demographic information. By looking at the demographic composition as well as the feature importance plot for Minnesota and US, apart from the crucial hospitalization information, we also suspect that the whether this state has higher proportion of white population can lead to the especially high daily case growth rate. Therefore, in our last Part IV, we will do an analysis from the individual level base on race and sex and see how death rate and infectious rate is related to that. &lt;/p&gt;
&lt;h1&gt;Part IV:&lt;/h1&gt;
&lt;p&gt;Due to the lare amount of the dataset, we initially process the data to the SQL database. For convenience and efficiency, we do not want reader to wait for too long to load the visualization. Therefore, we decided to use only partial data. The sampling method we used is stratified sampling base on age groups. The basic idea is that after the sampling process, the proportion of each age group should still be the samge compare to our original data and our final tree map looks like this:&lt;br&gt;
&lt;img alt="Treemap" src="\img\treemap.png" title="Tree Map"&gt;  &lt;br&gt;
From this we can see how many people are in each age group and the area of each square represents what proportion each age group is compared to the entire sample. You can see the comparison of before and after sampling by clicking the introduction part from the left sidebar. &lt;/p&gt;
&lt;p&gt;After this sampling method, we did some analysis using bar plots for infection and fatality cases base on age, sex and race. The following is a example of analyzing infection and death cases using sex and race: &lt;br&gt;
&lt;img alt="Sex_race" src="\img\sex_race_inf.png" title="Sex and Race, infection count"&gt;  &lt;br&gt;
&lt;img alt="Sex_race2" src="\img\sex_race_death.png" title="Sex and Race, death count"&gt;
From the perspective of total cases, White/Non-Hispanic as well as Black/Non-Hispanic have the largest infection count. While from the perspective of infection rate, American Indian is the highest. We believe the reason behind this is that Native Americans' culture were to gathered together and live as a group. Such activities made them to get infected easily. On the other hand, when looking at death cases, there is obvious difference between the number of cases of female and male, that male has more death cases for almost all races. Among all, Asian has the lowest death rate; In addition, Hawaiian has a higher rate of death compared to infection rate, this might be due to the limitation of data size.    &lt;/p&gt;
&lt;p&gt;Then, this is another example of analyzing age groups and sex: &lt;br&gt;
&lt;img alt="age_inf" src="\img\age_inf.png" title="Sex and Age, infection count"&gt;  &lt;br&gt;
&lt;img alt="age_death" src="\img\age_death.png" title="Sex and Age, death count"&gt; 
In general, infection rate is quite low for young people. Actually, it increases as population's age increases until 70, indicating younger populationâ€™s immune system do perform stronger. For people older than 70, infection rates decrease, and this might be caused by the limitation of their ability of outdoor activities, and this prevents them from many dangerous cases.Compared to infection cases, the death cases has a more obvious and straight information: people over 70 have a much larger death rate, they have a very high possibility of death once they got COVID19.&lt;/p&gt;
&lt;h1&gt;Key Insights from the project&lt;/h1&gt;
&lt;h2&gt;Findings and Conclusions&lt;/h2&gt;
&lt;p&gt;The detailed insights and analyzation were provided as examples before in my explanations for separate parts. The following are some key insights:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;According to the most updated information, now, in terms of total/new cases, states like California, Texas and Minnesota are the most severe states; In terms of death per million people, Massachussets and New Jersey are the most severe ones.&lt;/li&gt;
&lt;li&gt;Policy effect usually takes more than a week to be truly in effect. In addition, some policies might not be effective or even have opposite effect on the new case growth rate. &lt;/li&gt;
&lt;li&gt;For individual states level and the entire U.S. level, hospitalization factors are the most important factors to predict daily new case growth rate. With the combination of part II's observation, policy usually have lagged effect, therefore, our model did not capture the obvious effect of policies. We assume two reasons behind this: State's new case increase rate was too high and the spread of COVID19 was out of control that the policy can hardly stop this; State government does not implement the policy with punishment, therefore, the policy was not strict enough to be truly in effect because people did not take it seriously(Compare to Chinese government.)&lt;/li&gt;
&lt;li&gt;Infection rate has large reason to do with each race's culture, for instance, Native Americans and Hispanics(recorded as others in partIII) because they tend to gather together. On the other hand, older people tend to get higher chance of being both infected and death because of their immune system. &lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Overall, our data product provided some interesting views and perspectives on analyzing the policy effect statewise and country-wise. Although the process might not be robost enough, according to our analysis, state government and the U.S. government should definitely try harder to improve the effectness of COVID19 policies. The way they should approach to better policy needs to vary area by area according to each states' demographic and economic condition.   &lt;/p&gt;
&lt;h2&gt;Skills&lt;/h2&gt;
&lt;p&gt;Thanks to my teammates, we learned a lot of things from each other:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Practice using APIs from a variety of websites     &lt;/li&gt;
&lt;li&gt;Model improving by scaling and transforming variables   &lt;/li&gt;
&lt;li&gt;Deeper understanding of Time series models   &lt;/li&gt;
&lt;li&gt;Practice of interactive plots in our dashboard   &lt;/li&gt;
&lt;li&gt;Learn to find interesting insights from "not-so-important" factors (policy) and more practical understanding of the model&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;Finally, thanks to all of my teammate for their efforts and amazing ideas. Also, it was a great experience studying BIOS823 this semester, I learned so much practical machine learning and deep learning skills.&lt;/strong&gt;&lt;/p&gt;
&lt;h1&gt;Full Reference&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;COVID-19 cases in US from January till now: &lt;br&gt;
  https://data.cdc.gov/Case-Surveillance/United-States-COVID-19-Cases-and-Deaths-by-State-o/9mfq-cb36   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;COVID-19 patient-level data:&lt;br&gt;
  https://data.cdc.gov/Case-Surveillance/COVID-19-Case-Surveillance-Public-Use-Data/vbim-akqf   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;hospital resources (Hospital Capacity by State):     &lt;br&gt;
https://www.cdc.gov/nhsn/covid19/report-patient-impact.html#anchor_1594393649  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;COVID-19 US State Policy:    &lt;br&gt;
https://github.com/USCOVIDpolicy/COVID-19-US-State-Policy-Database  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;State demographic information:    &lt;br&gt;
https://www.census.gov/data/developers/data-sets/acs-1year.html&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content><category term="Dashboard"></category><category term="Dashboard"></category><category term="Visualization"></category><category term="Streamlit"></category><category term="Maching Learning"></category></entry><entry><title>Create an interactive dashboard using Streamlit</title><link href="/streamlit.html" rel="alternate"></link><published>2020-11-04T12:01:00-05:00</published><updated>2020-11-05T16:30:00-05:00</updated><author><name>Presnie Lu</name></author><id>tag:None,2020-11-04:/streamlit.html</id><summary type="html">&lt;p&gt;Create a dashboard for PhDs awarded in the US.&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;strong&gt;This blog is used to show some basic analysis on the dataset &lt;a href="https://ncses.nsf.gov/pubs/nsf19301/data"&gt;PhDs awarded in the US&lt;/a&gt;. We will also create an interactive dashboard using &lt;a href="https://www.streamlit.io/"&gt;Streamlit&lt;/a&gt;. The main goal of the dashboard is to provide some interesting perspectives of the recipients and institutions as well as offering people the ability to search for or focus on the specific location, sex, field of study and universities they are interested in. Feel free to play around in this &lt;a href="https://streamlit-pre.herokuapp.com/"&gt;Dashboard&lt;/a&gt;. &lt;/strong&gt;&lt;/p&gt;
&lt;h1&gt;Dataset&lt;/h1&gt;
&lt;p&gt;In this project, I chose to focus on three datasets. The first dataset is intended to give people an overview of how recipients and institution number change over time. Therefore, I chose Table 2 as my first data source. The second table to give people a detailed view of recipients. I decided to take a look at how recipients from each state different from each other in terms of Sex and Field of Study. My goal was to enable people to compare whichever states they want. Therefore, I chose Table6 as my second data source. Lastly, I'm curious about if there's difference between Doctorate-granting institutions, that is Universities, in terms of field of studies. Therefore, I chose Table4 as my last data source. &lt;/p&gt;
&lt;h1&gt;Streamlit&lt;/h1&gt;
&lt;p&gt;To build a dashboard, I chose to use streamlit. After installing streamlit in your computer, all you have to do is to follow the hint from the &lt;a href="https://docs.streamlit.io/en/stable/api.html"&gt;documentation&lt;/a&gt; and build customized widgets using python by your own. I won't go into details about it, but you can take a look at my &lt;a href="https://github.com/QianyinLu/streamlit/blob/main/app.py"&gt;GitHub&lt;/a&gt; to see how my dashboard is built. For the sake of convenience, I did not use jupyter notebook in this project. Please refer to the python file in github (app.py) and I included all data cleaning as well as manipulations within that file. &lt;/p&gt;
&lt;h1&gt;Dashboard and Analysis&lt;/h1&gt;
&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;Table2 is used to generate the &lt;strong&gt;Overview&lt;/strong&gt; Session. Since the base number of recipients and institutions are hugely different, I decide to instead calculate their %change from previous years. To do this, I used &lt;strong&gt;shift&lt;/strong&gt; to generate a lagged value and calculated the percentage change base on this. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;#caculate percentage change&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_excel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;overview.xlsx&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;skiprows&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Year&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Doctorate-granting institutions&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Doctorate recipients&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Institutions - Percentage change&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shift&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shift&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;
&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Recipients - Percentage change&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shift&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;shift&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Then, to see whether the number of Recipients will change with the number granting institutions, a line plot was used with x as year and y as percentage change. I used an altair line plot and add some layers on it so that when people put mouse on the line, they can also know the specific value of that percentage change. In addition, the overview page also allows readers to choose whichever feature(recipient/insititution/both) or time range they want to see. 
&lt;img alt="Overview" src="/img/overview.png" title="Overview"&gt; &lt;br&gt;
From the plot, we can see that the change of Recipients does not follow the exact trend of that of institutions.In fact, the change percentage for both features does not show obvious (either increase or decrease) trend from year 1974 to 2017. However, compare to the change rate of Institutions, Recipients' change fluctuates much more. We can observe that from 1990 to 1999, there is a significant decrease in percentage change of the recipients number while the change of institution number is fairly stable. Therefore, we can conclude that there is no direct relationship between the percentage change of the total number of recipients and that of institutions.&lt;/p&gt;
&lt;h2&gt;Recipients&lt;/h2&gt;
&lt;p&gt;In this session, I want to see whether there's significant difference between the number of Male and Female recipients and more specifically, I want to see whether such difference exists in various field of study and accross states. This is to see whether there's the well-known Simpson's paradox exists in terms of recipients' sex. &lt;br&gt;
I used Table6 in this session. In this data set, there are some missing values due to the confidential information. Originally, they were recorded as "D", I changed them into NaN now for better understanding. It is easy to notice that I melted the wide table to a long table for the convenience of plotting. &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;#melt the dataset&lt;/span&gt;
&lt;span class="n"&gt;re&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_excel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;re.xlsx&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;skiprows&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;United States&amp;quot;&lt;/span&gt; 
&lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;columns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;State&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Total Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Total Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Life_sciences Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Life_sciences Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="s2"&gt;&amp;quot;Physical/earth_sciences Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Physical/earth_sciences Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="s2"&gt;&amp;quot;Math/CS Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Math/CS Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Psychology/social_sciences Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="s2"&gt;&amp;quot;Psychology/social_sciences Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Engineering Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Engineering Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="s2"&gt;&amp;quot;Education Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Education Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Humanities/arts Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Humanities/arts Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
             &lt;span class="s2"&gt;&amp;quot;Others Male&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Others Female&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_numeric&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;errors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;coerce&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  
&lt;span class="n"&gt;melted&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;melt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id_vars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;State&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;var_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;category&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;value_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Number of People&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;cat_split&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;melted&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;category&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Series&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;melted&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Field of Study&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cat_split&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;melted&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Sex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cat_split&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;iloc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;melted&lt;/span&gt;&lt;span class="p"&gt;[[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;State&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Field of Study&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Sex&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Number of People&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;For this session, I want to give people the ability of choose which state they want to focus on. (Note that if they only care about the entire US, there's an option to just look at the totals by choosing "United States" in the select box.) In addition, people can add or remove any field of study base on their interest. After people decide which state to focus on and what field(s) of study to look at, they can also pick which other state to compare with. With all these options, the dashboard can provide visualizations of number of recipients by Sex and field of Study as well as a view of the dataset of the specified state.  &lt;/p&gt;
&lt;p&gt;I will use United States as an example. &lt;br&gt;
First, let's look at the total number of male and female in all fields of study for the US.(This can be seen from the "Show me the data" button):
&lt;img alt="US Total" src="/img/re_total.png" title="US Total"&gt; &lt;br&gt;
From this we can see the total numbers of Males and Females do not vary a lot. The number of Male is a little bit higher the number of females. However, this is not the case for each field of study.&lt;br&gt;
&lt;img alt="US Total By Fields of Study" src="/img/re_us.png" title="US Total By Fields of Study"&gt; &lt;br&gt;
Firstly, The difference between males and females within each field of study is much more obvious comparing to what we saw from the total population aggregated on all fields of studies. We can also observe from the plot that there are relatively huge differences between number of males and females for each fields of study. For Engineering, Math/Computer Science and Physical/health Sciences, the number of Males is much larger than the number of females. While for Education, Psychology/social science, the number of females is larger than the number males. This actually fits our common sense that males are usually better at hard science and females are better at soft science.&lt;br&gt;
Then, I wonder whether the difference would be different accross states. I will use North Carolina as an example. (To get this plot, choose North Carolina in "Compare with another state" from sidebar and click the checkbox "Compare with another state")&lt;br&gt;
&lt;img alt="US vs NC" src="/img/re_compare.png" title="US VS NC"&gt; &lt;br&gt;
It is very interesting to see from the plot that the distribution of males and females as well as fields of study for North Carolina actually resembles the situation of entire United States. Firstly, we see Life Science is the field with most recipients for both the entire country and NC. What's more, although the number of recipients aren't exactly the same, the relative ranks of fields by number of recipients are exactly the same. In addition, the proportions of males and females for each fields of study are also the same for the entire US and NC. With such information, in the future, when we try to explore distribution or characteristics of recipients of the entire country, we can simply draw samples from North Carolina because it fits the general situation of the US. &lt;/p&gt;
&lt;h2&gt;Institutions&lt;/h2&gt;
&lt;p&gt;This session is intended to compare the institutions for each field of study. The data used is from table4 and therefore, all information is constraint to the Top20/21 universities. Notice that some Universities does not have a value for certain Study Area, this does not mean that they do not have recipients in that area. Instead, it means they fail to be in top 20/21 universities for that specific field of study. In addition, we should pay attention to the variable &lt;strong&gt;Rank&lt;/strong&gt; from the dataset skips positions after equal ranking. Therefore, universities with the same amount of recipients have a same ranking. That is why we have either 20 or 21 universities.&lt;br&gt;
Notice that the orignal data table was a nested table with fields of study listed ahead of top institutions. Therefore, I did some manipulations to clean up the table:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;#cleanup the data&lt;/span&gt;
&lt;span class="n"&gt;ins&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read_excel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;institution.xlsx&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;skiprows&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;subjects_all&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Rank&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;-&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Field and institution&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;subjects&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;subjects_all&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;From&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[:,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Study Area&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;subjects&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;a1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Field and institution&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;20&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Field and institution&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
        &lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Study Area&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;loc&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Study Area&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
&lt;span class="n"&gt;ins_total&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Study Area&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;ins_sep&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;ins&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Study Area&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In general, the session is used for two main purposes. The first purpose is to search for top universities for each field. Readers can input any field they like and restrict the number of output. The "Information of the Field and Top Universities" will then render the general information of that field (total number of recipients) and the restraint number of top universities in that field. The second goal is to compare as many universities as you like. The scatter and bar plot basically shows you not only the performance of that university in the field but also comparison in an aggregate level. The scatter plot also has interactive tooltips so that readers can know the detailed information of each point by put the mouse on it.  &lt;/p&gt;
&lt;p&gt;I will use Cornell, Yale and Harvard University as an example.&lt;br&gt;
&lt;img alt="University Comparison" src="/img/top_u.png" title="University Comparison"&gt; &lt;br&gt;
From this plot we can see that Harvard has the most recipients in total among the three. It is consistent with the situation for each seperated field of study. For instance, Harvard has a much higher number of people in Humanities and arts and Life Sciences compare to both the other two schools. It is also in the Top 20 schools of a total 4 fields. Cornell is the second place and this is mostly because it is in the Top 20 universities of a total 2 fields, which is more than Yale university. Afterall, we can conclude that the universities with good overall (total) performance usually perform also well in fields. &lt;/p&gt;
&lt;h1&gt;Deploy the App&lt;/h1&gt;
&lt;p&gt;To let other people also view the app without running the python code, I used &lt;a href="https://dashboard.heroku.com/apps"&gt;Heroku&lt;/a&gt; to deploy the app so that everyone with the &lt;a href="https://streamlit-pre.herokuapp.com/"&gt;link&lt;/a&gt; has the access to it. Before the deployment, there are a few steps need to be prepared. First, we should create a github repository to store the app. Secondly, we need to create a requirements file to tell the server what packages need to be installed. Thirdly, we will need a setup file (already provided by heroku) to make sure the server environment is correct and customized some preference if you have. Lastly, the Profile serves like a make file that connect the server with file so that our app can be successfully launched. After all these steps, we can then deploy the entire repository with Heroku.&lt;/p&gt;</content><category term="Dashboard"></category><category term="Dashboard"></category><category term="Visualization"></category><category term="Streamlit"></category></entry></feed>